/*
 * Grabber.h
 */


#ifndef GRABBER_H_
#define GRABBER_H_

class Grabber : public Module {
private:
	bool isClaw1Open = false;
	Timer t;
public:

	void ModuleInit(){

	}

	 void OperatorControl(){					//Get joystick button input
			bool clawToggle2 = hw::stick->GetRawButton(3);	//CHANGE BUTTON
			bool grab = hw::stick->GetRawButton(5);	//CHANGE BUTTON
			bool eject = hw::stick->GetRawButton(6);	//CHANGE BUTTON

			if (grab){
				hw::lgrVic->Set(0.7);			//Rotate grabber wheels to pull cubes in
				hw::rgrVic->Set(0.7);
			} else if(eject){
				hw::lgrVic->Set(-0.7);			//Rotate grabber wheels to eject cubes
				hw::rgrVic->Set(-0.7);
			}else {
				hw::lgrVic->Set(0);				//No motion
				hw::rgrVic->Set(0);
			}

			if (clawToggle2){					//Depending on state of claw, open or close pneumatic claw
				if(isClaw1Open){
					hw::doubleSol1->Set(frc::DoubleSolenoid::Value::kReverse);
					t.Reset();
					t.Start();
				}else{
					hw::doubleSol1->Set(frc::DoubleSolenoid::Value::kForward);
					t.Reset();
					t.Start();
				}
				isClaw1Open = !isClaw1Open;		//Change state of
			}
			if (t.Get() >= 5){
				hw::doubleSol1->Set(frc::DoubleSolenoid::Value::kOff);
				t.Stop();
				t.Reset();
			}
	}

	void Autonomous(){
	}
};

#endif /* GRABBER_H_ */



